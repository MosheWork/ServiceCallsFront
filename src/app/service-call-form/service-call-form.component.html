<div class="service-call-form" dir="rtl">
  <h1>驻转转 拽专转 砖专转</h1>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <!-- 转专转 -->
    <div class="form-row">
      <label for="title">转专转 *</label>
      <input id="title" type="text" formControlName="title">
      <div class="error" *ngIf="form.get('title')?.touched && form.get('title')?.invalid">
          转专转
      </div>
    </div>

    <!-- 转专 -->
    <div class="form-row">
      <label for="description">转专</label>
      <textarea id="description" rows="4" formControlName="description"></textarea>
    </div>

    <!-- 砖转砖 驻转 -->
    <div class="form-row">
      <label for="requestUser">砖转砖 驻转 *</label>
      <input id="requestUser" type="text" formControlName="requestUser">
      <div class="error" *ngIf="form.get('requestUser')?.touched && form.get('requestUser')?.invalid">
          砖 砖转砖
      </div>
    </div>

    <!-- 驻 专 -->
    <div class="form-row">
      <label for="callbackPhone">驻 专 *</label>
      <input id="callbackPhone" type="text" formControlName="callbackPhone">
      <div class="error" *ngIf="form.get('callbackPhone')?.touched && form.get('callbackPhone')?.invalid">
          住驻专 驻
      </div>
    </div>

    <!-- 拽 转拽 -->
    <div class="form-row">
      <label for="location">拽 转拽</label>
      <input id="location" type="text" formControlName="location">
    </div>

    <!-- 砖 砖 -->
    <div class="form-row">
      <label for="computerName">砖 砖</label>
      <input id="computerName" type="text" formControlName="computerName">
    </div>

<!--  拽专 专砖转 -->
<div class="form-row">
  <label for="mainCategoryID">拽专 专砖转 *</label>

  <mat-form-field appearance="outline" class="full-width">
    <mat-select
      id="mainCategoryID"
      formControlName="mainCategoryID"
      (selectionChange)="onMainCategoryChange()">

      <!-- search inside dropdown -->
      <mat-option disabled>
        <input
          matInput
          placeholder="驻砖 拽专..."
          [(ngModel)]="mainCategorySearch"
          name="mainCategorySearch"
          [ngModelOptions]="{ standalone: true }"
          (click)="$event.stopPropagation()"
          (keydown)="$event.stopPropagation()"
        >
      </mat-option>
      
      <mat-option
        *ngFor="let mc of filteredMainCategories()"
        [value]="mc.id">
        {{ mc.name }}
      </mat-option>
      

    </mat-select>

    <mat-error *ngIf="form.get('mainCategoryID')?.touched && form.get('mainCategoryID')?.invalid">
       专 拽专
    </mat-error>
  </mat-form-field>
</div>

<!--  转转志拽专 1 -->
<div class="form-row" *ngIf="subCategory1List && subCategory1List.length">
  <label for="subCategory1ID">转转志拽专 1</label>

  <mat-form-field appearance="outline" class="full-width">
    <mat-select
      id="subCategory1ID"
      formControlName="subCategory1ID"
      (selectionChange)="onSubCategory1Change()">

      <!-- search inside dropdown -->
      <mat-option disabled>
        <input
          matInput
          placeholder="驻砖 转转志拽专..."
          [(ngModel)]="subCategory1Search"
          name="subCategory1Search"
          [ngModelOptions]="{ standalone: true }"
          (click)="$event.stopPropagation()"
          (keydown)="$event.stopPropagation()"
        >
      </mat-option>
      
      <mat-option
        *ngFor="let sc1 of filteredSubCategory1()"
        [value]="sc1.id">
        {{ sc1.name }}
      </mat-option>
      

    </mat-select>
  </mat-form-field>
</div>


<!--  转转志拽专 2 -->
<div class="form-row" *ngIf="subCategory2List && subCategory2List.length">
  <label for="subCategory2ID">转转志拽专 2</label>

  <mat-form-field appearance="outline" class="full-width">
    <mat-select
      id="subCategory2ID"
      formControlName="subCategory2ID">

      <!-- search inside dropdown -->
      <mat-option disabled>
        <input
          matInput
          placeholder="驻砖 转转志拽专..."
          [(ngModel)]="subCategory2Search"
          name="subCategory2Search"
          [ngModelOptions]="{ standalone: true }"
          (click)="$event.stopPropagation()"
          (keydown)="$event.stopPropagation()"
        >
      </mat-option>
      
      <mat-option
        *ngFor="let sc2 of filteredSubCategory2()"
        [value]="sc2.id">
        {{ sc2.name }}
      </mat-option>
      
      

    </mat-select>
  </mat-form-field>
</div>


    <!-- 注驻转 (砖专) -->
    <div class="form-row" *ngIf="priorities && priorities.length">
      <label for="priorityID">注驻转</label>
      <select id="priorityID" formControlName="priorityID">
        <option *ngFor="let pr of priorities" [ngValue]="pr.id">
          {{ pr.name }}
        </option>
      </select>
    </div>

    <!-- 驻转专 砖专 -->
    <div class="actions">
      <button type="submit" [disabled]="form.invalid || isSubmitting">
        {{ isSubmitting ? '砖...' : '砖专 拽专' }}
      </button>
    </div>

    <!-- 注转 -->
    <div class="message success" *ngIf="successMessage">
      {{ successMessage }}
    </div>
    <div class="message error" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

  </form>
</div>
